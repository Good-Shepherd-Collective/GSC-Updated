---
import { getCollection } from "astro:content";
const allPosts = await getCollection("posts");
import BaseLayout from "@/layouts/BaseLayout.astro";
import EntriesOne from "@/components/blog/EntriesOne.astro";
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
---
<BaseLayout>
  <section class="md:px-12 sm:px-8">
    <div class="border-x border-zinc-800">
      <div class="grid grid-cols-1 lg:grid-cols-2 bg-zinc-800 gap-px h-full">

        <div class="h-full flex flex-col">
          <div class="p-8 lg:px-10 bg-black h-full">
            <h2 class="text-4xl md:text-6xl xl:text-7xl text-white">
              Writings from StudioMax
            </h2>
            <p class="mt-4 text-zinc-400 tracking-wide">
              Tips and trickd about this and that all day everyday.
            </p>
          </div>
          <form class="bg-zinc-800 space-y-px flex flex-col flex-grow border-t border-zinc-800">
            <div>
              <label
                for="email-address"
                class="sr-only"
                >Email address</label
              >
              <input
                id="email-address"
                name="email-address"
                type="email"
                autocomplete="email"
                placeholder="Your email"
                required
                aria-required="true"
                class="block w-full appearance-none border border-none p-8 lg:px-10 bg-black placeholder-zinc-500 text-white focus:outline-none focus:ring-blue-400 focus:ring-2 ring-inset"
              />
            </div>
            <div class="bg-black">
              <button
                type="submit"
                class="text-2xl h-24 px-8 lg:h-32 lg:px-20 focus:ring-2 rounded-full hover:bg-blue-400 ease-in-out transform duration-500 ring-inset ring-blue-400 inline-flex items-center font-medium     bg-black text-white justify-between ring-2 hover:ring-blue-400 w-full">
                Subscribe <span>➜</span>
              </button>
            </div>
          </form>
        </div>
        <ol
          role="list"
          class="flex flex-col gap-px bg-black">
          {
            tags.map((tag) => (
              <li class="w-full">
                <a
                  class="text-sm py-2 h-16 px-10 focus:ring-2 rounded-full bg-black hover:bg-zinc-800  text-white ease-in-out transform duration-500 ring-inset inline-flex items-center font-medium justify-between ring-2 ring-zinc-800 w-full"
                  href={`/tags/${tag}`}>
                  {tag} <span>➜</span>
                </a>
              </li>
            ))
          }
        </ol>
      </div>
    </div>
  </section>
  <section class="md:px-12 sm:px-8">
    <div class="border-x border-zinc-800">
      <ul
        class="grid grid-cols-1 gap-px bg-zinc-700 lg:grid-cols-3 sm:grid-cols-2">
        {
          allPosts.slice().map((post) => (
            <EntriesOne
              url={"/posts/" + post.slug}
              title={post.data.title}
              description={post.data.description}
              alt={post.data.title}
              pubDate={post.data.pubDate.toString().slice(0, 10)}
              author={post.data.author}
              image={post.data.image.url}
            />
          ))
        }
      </ul>
    </div>
  </section>
</BaseLayout>
